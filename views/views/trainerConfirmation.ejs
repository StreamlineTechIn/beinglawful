<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Dashboard - Being Lawful</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .tab {
            display: flex;
            justify-content: start;
            margin-bottom: 20px;
        }
        .tab button {
            background-color: #e0e0e0;
            border: none;
            padding: 10px 20px;
            margin-right: 10px;
            cursor: pointer;
            border-radius: 5px;
        }
        .tab button.active {
            background-color: #1976d2;
            color: white;
        }
        .tab-content {
            display: none;
            padding: 20px;
            background-color: white;
            border-radius: 5px;
        }
        .tab-content.active {
            display: block;
        }
        .table-container {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 10px;
            border-bottom: 1px solid #ccc;
            text-align: left;
        }
        th select {
            width: 100%;
        }
        .note {
            color: red;
            font-size: 14px;
            margin-top: 10px;
        }
        .section-title {
            font-size: 18px;
            margin-bottom: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="tab">
    <button class="tab-button active" onclick="openTab('resources')">Resources</button>
    <button class="tab-button" onclick="openTab('students')">Student Data</button>
    <button class="tab-button" onclick="openTab('info')">School Info</button>
</div>

<!-- RESOURCES TAB -->
<div id="resources" class="tab-content active">
    <h2>Workshop Timing</h2>
    <label for="workshopStartTime">Start Time:</label>
    <input type="time" id="workshopStartTime" onchange="enableSaveButton(); updateEndTime();">
    <button id="timepickerSaveButton" disabled onclick="alert('Time saved!')">Save</button>
    <p id="durationMessage" style="display: none;">Workshop will end at <span id="workshopEndTimeDisplay"></span></p>
    <input type="hidden" id="workshopEndTime" />

    <h2 style="margin-top:30px;">Trainer Selection</h2>
    <label for="trainerId1">Trainer 1:</label>
    <select id="trainerId1" onchange="updateTrainerSelection()">
        <option value="">Select</option>
        <option value="t1" data-dates='["2025-07-25","2025-07-28"]' data-district="Jalgaon">Trainer A</option>
        <option value="t2" data-dates='["2025-07-30","2025-08-01"]' data-district="Pune">Trainer B</option>
    </select>

    <div id="trainer1-dates" style="display: none;" class="note">
        Trainer 1 Available Dates: <span id="trainer1-dates-list"></span>
    </div>

    <br><br>
    <label for="trainerId2">Trainer 2:</label>
    <select id="trainerId2" onchange="updateTrainerSelection()">
        <option value="">Select</option>
        <option value="t3" data-dates='["2025-07-26","2025-07-27"]' data-district="Jalgaon">Trainer C</option>
        <option value="t4" data-dates='["2025-08-02"]' data-district="Mumbai">Trainer D</option>
    </select>

    <div id="trainer2-dates" style="display: none;" class="note">
        Trainer 2 Available Dates: <span id="trainer2-dates-list"></span>
    </div>

    <div id="trainer-cost-note" class="note" style="display: none;">
        Trainers are from different districts; this may affect the cost. Please confirm with Admin.
    </div>
</div>

<!-- STUDENT DATA TAB -->
<div id="students" class="tab-content">
    <h2>Student Data</h2>
    <div class="table-container">
        <table id="studentTable">
            <thead>
                <tr>
                    <th>Student Name<br>
                        <select data-column="name" onchange="applyFilters('studentTable')">
                            <option value="">All</option>
                            <option value="Aayesha">Aayesha</option>
                            <option value="Ravi">Ravi</option>
                        </select>
                    </th>
                    <th>Class<br>
                        <select data-column="class" onchange="applyFilters('studentTable')">
                            <option value="">All</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                        </select>
                    </th>
                    <th>Percentage<br>
                        <select data-column="percentage" onchange="applyFilters('studentTable')">
                            <option value="">All</option>
                            <option value="80%">80%</option>
                            <option value="90%">90%</option>
                        </select>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td data-column="name">Aayesha</td>
                    <td data-column="class">8</td>
                    <td data-column="percentage">80%</td>
                </tr>
                <tr>
                    <td data-column="name">Ravi</td>
                    <td data-column="class">9</td>
                    <td data-column="percentage">90%</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- SCHOOL INFO TAB -->
<div id="info" class="tab-content">
    <h2>School Info</h2>
    <p>Name: Being Lawful School</p>
    <p>District: Jalgaon</p>
    <p>Contact: principal@beinglawful.org</p>
</div>

<script>
function openTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    document.querySelector(`.tab-button[onclick="openTab('${tabId}')"]`).classList.add('active');
}

function enableSaveButton() {
    document.getElementById('timepickerSaveButton').disabled = false;
}

function updateEndTime() {
    const start = document.getElementById('workshopStartTime').value;
    if (!start) return;

    const [h, m] = start.split(':').map(Number);
    const end = new Date();
    end.setHours(h + 4, m);
    const endFormatted = end.toTimeString().slice(0, 5);

    document.getElementById('workshopEndTime').value = endFormatted;
    document.getElementById('workshopEndTimeDisplay').textContent = endFormatted;
    document.getElementById('durationMessage').style.display = 'block';
    document.getElementById('timepickerSaveButton').disabled = true;
}

function updateTrainerSelection() {
    const t1 = document.getElementById('trainerId1');
    const t2 = document.getElementById('trainerId2');

    const d1 = t1.options[t1.selectedIndex].dataset;
    const d2 = t2.options[t2.selectedIndex].dataset;

    const t1Dates = JSON.parse(d1.dates || '[]');
    const t2Dates = JSON.parse(d2.dates || '[]');

    document.getElementById('trainer1-dates').style.display = t1Dates.length ? 'block' : 'none';
    document.getElementById('trainer1-dates-list').textContent = t1Dates.join(', ');

    document.getElementById('trainer2-dates').style.display = t2Dates.length ? 'block' : 'none';
    document.getElementById('trainer2-dates-list').textContent = t2Dates.join(', ');

    if (d1.district && d2.district && d1.district !== d2.district) {
        document.getElementById('trainer-cost-note').style.display = 'block';
    } else {
        document.getElementById('trainer-cost-note').style.display = 'none';
    }
}

function applyFilters(tableId) {
    const table = document.getElementById(tableId);
    const filters = {};
    table.querySelectorAll('thead select[data-column]').forEach(select => {
        const col = select.dataset.column;
        const val = select.value;
        if (val) filters[col] = val;
    });

    table.querySelectorAll('tbody tr').forEach(row => {
        let show = true;
        for (let col in filters) {
            const cell = row.querySelector(`[data-column="${col}"]`);
            if (cell && cell.textContent.trim() !== filters[col]) show = false;
        }
        row.style.display = show ? '' : 'none';
    });
}
</script>

</body>
</html>
